(()=>{"use strict";var e={d:(t,a)=>{for(var n in a)e.o(a,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:a[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{iQ:()=>a,p1:()=>o,my:()=>r,Rw:()=>C,KQ:()=>y,QW:()=>g,TF:()=>n,sM:()=>u,xZ:()=>p,BN:()=>s,z4:()=>c,F6:()=>i,pG:()=>d,f:()=>l});class t{constructor(e,t){this.name=e,this.color=t}}class a{constructor(e,t,a,n,d="Inbox"){this.id=e,this.name=t,this.description=a,this.dueDateString=n,this.groupName=d}}let n=[],d=[new a(1,"Call Mum","Make a call to Mum telling her about stuff.","2022-11-04","School"),new a(2,"Buy protein powder","Buy the 500g Nestle protein powder that's on a discount.","2022-11-03","Grocery"),new a(3,"Drink a glass of water","Hydration is important!","2022-11-27"),new a(4,"Play video games","Time for some fun!","2022-11-04")],o="Inbox";function l(){let e=document.querySelector("#down-arrow-button"),t=document.querySelector(".groups");e.classList.contains("collapsed")?(e.classList.remove("collapsed"),t.classList.remove("collapsed")):(e.classList.add("collapsed"),t.classList.add("collapsed"))}function r(){let e=document.querySelector("#down-arrow-button"),a=document.querySelector(".groups"),d=new t("Untitled","#000000");n.push(d),m(d),e.classList.remove("collapsed"),a.classList.remove("collapsed"),a.lastChild.firstChild.focus()}function s(e){d.forEach((t=>{t.groupName===n[e].name&&(t.groupName="Inbox")}));let t=document.querySelector(".groups");t.removeChild(t.children[e+1]),n.splice(e,1)}function c(){let e=document.querySelector("main");null!=e&&e.remove()}function i(e){let t=e.target.parentElement.dataset.id;d.forEach((e=>{if(String(e.id)===String(t)){let t=d.indexOf(e);d.splice(t,1)}})),e.target.parentElement.remove()}function u(){document.querySelector("nav").style.pointerEvents="none"}function p(){document.querySelector("nav").style.pointerEvents="auto"}function m(e){let t=document.querySelector(".groups"),a=document.createElement("div");a.classList.add("group-item"),a.classList.add("custom"),t.appendChild(a);let n=document.createElement("input");n.classList.add("custom-group-name"),n.type="text",n.value=e.name,n.maxLength="8",n.spellcheck=!1,n.autocomplete="off",a.appendChild(n);let d=document.createElement("input");d.type="color",d.classList.add("color-tag"),d.value=e.color,a.appendChild(d);let o=document.createElement("img");o.src="assets/trash.svg",o.alt="trash icon",a.appendChild(o)}function g(e){let t=document.querySelector("body"),a=document.createElement("main");t.appendChild(a);let o=document.createElement("div");o.classList.add("heading"),a.appendChild(o);let l=document.createElement("h2");l.id="current-group-name",l.textContent=e,o.appendChild(l);let r=document.createElement("img");r.id="add-task-button",r.src="assets/plus.svg",r.alt="add task button",o.appendChild(r);let s=document.createElement("div");s.classList.add("task-section"),a.appendChild(s),function(e){let t=document.querySelector(".task-section"),a=new Map;d.forEach((t=>{if("Inbox"!==e&&t.groupName!==e)return;let n=t.dueDateString,d=new Date(n);d.setHours(0,0,0,0);let o=new Date;o.setHours(0,0,0,0),d<o&&(n="Overdue"),a.has(n)?a.get(n).push(t):a.set(n,[t])}));let o=new Map,l=Array.from(a.keys());l.sort(((e,t)=>"Overdue"===e?-1:"Overdue"===t?1:new Date(e)-new Date(t))),l.forEach((e=>{o.set(e,a.get(e))})),console.log(o);let r=0;o.forEach(((e,a)=>{let d="Overdue";if("Overdue"!==a){let e=new Date(a);d=e.toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"}),new Date(Date.now()).getDate()===e.getDate()&&(d="Today - "+d)}let o=document.createElement("div");o.classList.add("task-content"),t.appendChild(o);let l=document.createElement("h3");l.classList.add("date-header"),l.textContent=d,o.appendChild(l),function(e,t){let a=document.querySelectorAll(".task-content")[e],d=document.createElement("div");d.classList.add("tasks"),a.appendChild(d),t.forEach((e=>{let t=document.createElement("div");t.classList.add("task"),t.dataset.id=e.id,d.appendChild(t);let a=document.createElement("input");a.type="checkbox",t.appendChild(a);let o=document.createElement("p");if(o.textContent=e.name,t.appendChild(o),"Inbox"!==e.groupName){let a=document.createElement("div");a.classList.add("group-tag"),n.forEach((t=>{t.name!==e.groupName||(a.style.backgroundColor=t.color)})),t.appendChild(a);let d=document.createElement("p");d.textContent=e.groupName,a.appendChild(d)}}))}(r,e),r++}))}(e)}function h(){let e=document.querySelector(".task-group-dropdown"),a=n.slice();a.push(new t("Inbox","#00B4D8")),a.forEach((t=>{let a=document.createElement("button");a.type="button",a.textContent=t.name,a.style.backgroundColor=t.color,e.appendChild(a)}))}function y(e){let t=document.querySelector("main"),a=document.createElement("div");a.classList.add("edit-task-modal"),a.dataset.id=e.id,t.appendChild(a);let d=document.createElement("form");a.appendChild(d);let o=document.createElement("div");o.classList.add("edit-task-modal-content"),d.appendChild(o);let l=document.createElement("div");l.classList.add("task-name"),o.appendChild(l);let r=document.createElement("input");r.type="text",r.id="task-name",r.placeholder="Name",r.minLength="1",r.maxLength="50",r.autocomplete="off",r.required=!0,r.value=e.name,l.appendChild(r);let s=document.createElement("div");s.classList.add("task-description"),o.appendChild(s);let c=document.createElement("textarea");c.id="task-description",c.placeholder="Description",c.textContent=e.description,s.appendChild(c);let i=document.createElement("div");i.classList.add("task-options"),o.appendChild(i);let u=document.createElement("div");u.classList.add("task-date"),i.appendChild(u);let p=document.createElement("input");p.type="date",p.id="task-date",p.value=e.dueDateString,p.required=!0,u.appendChild(p);let m=document.createElement("div");m.classList.add("task-group-dropdown-wrapper"),i.appendChild(m);let g=document.createElement("button");g.type="button",g.textContent=e.groupName,g.style.backgroundColor="#00B4D8",n.forEach((t=>{t.name===e.groupName&&(g.style.backgroundColor=t.color)})),m.appendChild(g);let y=document.createElement("div");y.classList.add("task-group-dropdown"),m.appendChild(y),h();let C=document.createElement("div");C.classList.add("edit-task-modal-buttons"),d.appendChild(C);let v=document.createElement("button");v.classList.add("cancel-button"),v.type="button",v.textContent="Cancel",C.appendChild(v);let E=document.createElement("button");E.classList.add("confirm-button"),E.type="submit",E.textContent="Confirm",C.appendChild(E)}function C(){let e=document.querySelector("main"),t=document.createElement("div");t.classList.add("add-task-modal"),e.appendChild(t);let a=document.createElement("form");t.appendChild(a);let n=document.createElement("div");n.classList.add("add-task-modal-content"),a.appendChild(n);let d=document.createElement("div");d.classList.add("task-name"),n.appendChild(d);let o=document.createElement("input");o.type="text",o.id="task-name",o.placeholder="Name",o.minLength="1",o.maxLength="50",o.autocomplete="off",o.required=!0,d.appendChild(o);let l=document.createElement("div");l.classList.add("task-description"),n.appendChild(l);let r=document.createElement("textarea");r.id="task-description",r.placeholder="Description",l.appendChild(r);let s=document.createElement("div");s.classList.add("task-options"),n.appendChild(s);let c=document.createElement("div");c.classList.add("task-date"),s.appendChild(c);let i=document.createElement("input");i.type="date",i.id="task-date",i.required=!0,c.appendChild(i);let u=document.createElement("div");u.classList.add("task-group-dropdown-wrapper"),s.appendChild(u);let p=document.createElement("button");p.type="button",p.textContent="Inbox",p.style.backgroundColor="#00B4D8",u.appendChild(p);let m=document.createElement("div");m.classList.add("task-group-dropdown"),u.appendChild(m),h();let g=document.createElement("div");g.classList.add("add-task-modal-buttons"),a.appendChild(g);let y=document.createElement("button");y.classList.add("cancel-button"),y.type="button",y.textContent="Cancel",g.appendChild(y);let C=document.createElement("button");C.classList.add("confirm-button"),C.type="submit",C.textContent="Confirm",g.appendChild(C)}!function(){let e=document.querySelector("body"),a=document.createElement("nav");e.appendChild(a);let d=document.createElement("h1");d.textContent="To Do",a.appendChild(d);let o=document.createElement("div");o.classList.add("groups-wrapper"),a.appendChild(o);let l=document.createElement("div");l.classList.add("groups-heading"),o.appendChild(l);let r=document.createElement("p");r.textContent="Groups",l.appendChild(r);let s=document.createElement("div");s.classList.add("groups-heading-buttons"),l.appendChild(s);let c=document.createElement("img");c.src="assets/down-arrow.svg",c.alt="down arrow",c.id="down-arrow-button",s.appendChild(c);let i=document.createElement("img");i.src="assets/plus.svg",i.alt="plus",i.id="plus-button",s.appendChild(i);let u=document.createElement("div");u.classList.add("groups"),o.appendChild(u);let p=document.createElement("div");p.classList.add("group-item"),p.id="inbox",u.appendChild(p);let g=document.createElement("p");g.textContent="Inbox",p.appendChild(g),n.push(new t("School","#FF0000")),n.push(new t("Grocery","#00FF00")),n.push(new t("Hospital","#0000FF")),n.push(new t("Games","#FFFF00")),n.forEach((e=>{m(e)}))}(),document.querySelector("#inbox").classList.add("active"),g(o),function(){let e=document.querySelector(".groups-wrapper"),t="";e.addEventListener("click",(e=>{if("down-arrow-button"===e.target.id&&l(),"plus-button"===e.target.id&&r(),"IMG"===e.target.tagName&&e.target.closest(".group-item")){let t=document.querySelector(".groups"),a=Array.from(t.children).slice(1).indexOf(e.target.parentElement);e.target.parentElement.children[0].value===o&&(document.querySelector("#inbox").classList.add("active"),o="Inbox"),s(a),c(),g(o)}e.target.classList.contains("group-item")&&(Array.from(e.target.parentElement.children).forEach((e=>{e.classList.remove("active")})),e.target.classList.add("active"),o=null==e.target.children[0].value?"Inbox":e.target.children[0].value,c(),g(o))})),e.addEventListener("change",(e=>{if(e.target.classList.contains("color-tag")){let t=e.target.parentElement,a=document.querySelector(".groups"),d=Array.from(a.children).indexOf(t)-1;n[d].color=e.target.value,c(),g(o)}}),!0),e.addEventListener("focus",(e=>{e.target.classList.contains("custom-group-name")&&(t=e.target.value)}),!0),e.addEventListener("blur",(e=>{if(e.target.classList.contains("custom-group-name")){let a=e.target.value;if(a===t)return;if(""===a)return void(e.target.value=t);for(let d=0;d<n.length;d++)if(n[d].name===a)return void(e.target.value=t);let l=e.target.parentElement,r=document.querySelector(".groups"),s=Array.from(r.children).indexOf(l)-1;n[s].name=a,d.forEach((e=>{e.groupName===t&&(e.groupName=a)})),c();let i=document.querySelector(".group-item.active");o=null==i.children[0].value?"Inbox":i.children[0].value,g(o)}}),!0);let m=document.documentElement;m.addEventListener("click",(e=>{if(!e.target.closest("nav")){if("checkbox"===e.target.type&&i(e),"checkbox"!==e.target.type&&e.target.closest(".task")){let t=e.target.closest(".task").dataset.id-1;y(d[t]),document.querySelector(".edit-task-modal").style.display="flex",u()}if("add-task-button"===e.target.id&&(C(),document.querySelector(".add-task-modal").style.display="flex",u()),e.target.classList.contains("cancel-button"))p(),e.target.closest(".edit-task-modal")?e.target.closest(".edit-task-modal").remove():e.target.closest(".add-task-modal")&&e.target.closest(".add-task-modal").remove();else if(null!=e.target.closest(".task-group-dropdown")||null==e.target.closest(".edit-task-modal")&&!e.target.closest(".add-task-modal")||"flex"!==document.querySelector(".task-group-dropdown").style.display){if(e.target==document.querySelector(".task-group-dropdown-wrapper > button"))document.querySelector(".task-group-dropdown").style.display="flex";else if(e.target.closest(".task-group-dropdown")&&"BUTTON"===e.target.tagName){let t=document.querySelector(".task-group-dropdown-wrapper");t.children[0].textContent=e.target.textContent,t.children[0].style.backgroundColor=e.target.style.backgroundColor,document.querySelector(".task-group-dropdown").style.display="none"}}else document.querySelector(".task-group-dropdown").style.display="none"}})),m.addEventListener("submit",(e=>{if(e.preventDefault(),e.target.lastChild.lastChild.classList.contains("confirm-button"))if(e.target.closest(".edit-task-modal")){let e=document.querySelector(".edit-task-modal"),t=e.dataset.id-1;d[t].name=document.querySelector(".edit-task-modal #task-name").value,d[t].description=document.querySelector(".edit-task-modal #task-description").value,d[t].groupName=document.querySelector(".task-group-dropdown-wrapper > button").textContent,d[t].dueDateString=document.querySelector(".edit-task-modal #task-date").value,c(),g(o),e.remove(),p()}else if(e.target.closest(".add-task-modal")){let e=document.querySelector(".add-task-modal"),t=new a;t.id=d.length+1,t.name=document.querySelector(".add-task-modal #task-name").value,t.description=document.querySelector(".add-task-modal #task-description").value,t.groupName=document.querySelector(".task-group-dropdown-wrapper > button").textContent,t.dueDateString=document.querySelector(".add-task-modal #task-date").value,d.push(t),console.log(d),c(),g(o),e.remove(),p()}}))}()})();
(()=>{"use strict";var e={d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{p1:()=>d,my:()=>r,KQ:()=>h,QW:()=>g,TF:()=>a,sM:()=>u,xZ:()=>p,BN:()=>c,z4:()=>s,F6:()=>i,pG:()=>o,f:()=>l});class t{constructor(e,t){this.name=e,this.color=t}}class n{constructor(e,t,n,a,o="Inbox"){this.id=e,this.name=t,this.description=n,this.dueDateString=a,this.groupName=o}}let a=[],o=[new n(1,"Call Mum","Make a call to Mum telling her about stuff.","2022-11-04","School"),new n(2,"Buy protein powder","Buy the 500g Nestle protein powder that's on a discount.","2022-11-03","Grocery"),new n(3,"Drink a glass of water","Hydration is important!","2022-11-27"),new n(4,"Play video games","Time for some fun!","2022-11-04")],d="Inbox";function l(){let e=document.querySelector("#down-arrow-button"),t=document.querySelector(".groups");e.classList.contains("collapsed")?(e.classList.remove("collapsed"),t.classList.remove("collapsed")):(e.classList.add("collapsed"),t.classList.add("collapsed"))}function r(){let e=document.querySelector("#down-arrow-button"),n=document.querySelector(".groups"),o=new t("Untitled","#000000");a.push(o),m(o),e.classList.remove("collapsed"),n.classList.remove("collapsed"),n.lastChild.firstChild.focus()}function c(e){o.forEach((t=>{t.groupName===a[e].name&&(t.groupName="Inbox")}));let t=document.querySelector(".groups");t.removeChild(t.children[e+1]),a.splice(e,1)}function s(){let e=document.querySelector("main");null!=e&&e.remove()}function i(e){let t=e.target.parentElement.dataset.id;o.forEach((e=>{if(String(e.id)===String(t)){let t=o.indexOf(e);o.splice(t,1)}})),e.target.parentElement.remove()}function u(){document.querySelector("nav").style.pointerEvents="none"}function p(){document.querySelector("nav").style.pointerEvents="auto"}function m(e){let t=document.querySelector(".groups"),n=document.createElement("div");n.classList.add("group-item"),n.classList.add("custom"),t.appendChild(n);let a=document.createElement("input");a.classList.add("custom-group-name"),a.type="text",a.value=e.name,a.maxLength="8",a.spellcheck=!1,a.autocomplete="off",n.appendChild(a);let o=document.createElement("input");o.type="color",o.classList.add("color-tag"),o.value=e.color,n.appendChild(o);let d=document.createElement("img");d.src="assets/trash.svg",d.alt="trash icon",n.appendChild(d)}function g(e){let t=document.querySelector("body"),n=document.createElement("main");t.appendChild(n);let d=document.createElement("h2");d.id="current-group-name",d.textContent=e,n.appendChild(d);let l=document.createElement("div");l.classList.add("task-section"),n.appendChild(l),function(e){let t=document.querySelector(".task-section"),n=new Map;o.forEach((t=>{if("Inbox"!==e&&t.groupName!==e)return;let a=t.dueDateString;new Date(a).getDate()<new Date(Date.now()).getDate()&&(a="Overdue"),n.has(a)?n.get(a).push(t):n.set(a,[t])}));let d=new Map,l=Array.from(n.keys());l.sort(((e,t)=>"Overdue"===e?-1:"Overdue"===t?1:new Date(e)-new Date(t))),l.forEach((e=>{d.set(e,n.get(e))}));let r=0;d.forEach(((e,n)=>{let o="Overdue";if("Overdue"!==n){let e=new Date(n);o=e.toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"}),new Date(Date.now()).getDate()===e.getDate()&&(o="Today - "+o)}let d=document.createElement("div");d.classList.add("task-content"),t.appendChild(d);let l=document.createElement("h3");l.classList.add("date-header"),l.textContent=o,d.appendChild(l),function(e,t){let n=document.querySelectorAll(".task-content")[e],o=document.createElement("div");o.classList.add("tasks"),n.appendChild(o),t.forEach((e=>{let t=document.createElement("div");t.classList.add("task"),t.dataset.id=e.id,o.appendChild(t);let n=document.createElement("input");n.type="checkbox",t.appendChild(n);let d=document.createElement("p");if(d.textContent=e.name,t.appendChild(d),"Inbox"!==e.groupName){let n=document.createElement("div");n.classList.add("group-tag"),a.forEach((t=>{t.name!==e.groupName||(n.style.backgroundColor=t.color)})),t.appendChild(n);let o=document.createElement("p");o.textContent=e.groupName,n.appendChild(o)}}))}(r,e),r++;let c=document.createElement("button");c.textContent="Add a new task",d.appendChild(c)}))}(e)}function h(e){let n=document.querySelector("main"),o=document.createElement("div");o.classList.add("edit-task-modal"),o.dataset.id=e.id,n.appendChild(o);let d=document.createElement("form");o.appendChild(d);let l=document.createElement("div");l.classList.add("edit-task-modal-content"),d.appendChild(l);let r=document.createElement("div");r.classList.add("task-name"),l.appendChild(r);let c=document.createElement("input");c.type="text",c.id="task-name",c.placeholder="Name",c.minLength="1",c.maxLength="50",c.autocomplete="off",c.required=!0,c.value=e.name,r.appendChild(c);let s=document.createElement("div");s.classList.add("task-description"),l.appendChild(s);let i=document.createElement("textarea");i.id="task-description",i.placeholder="Description",i.textContent=e.description,s.appendChild(i);let u=document.createElement("div");u.classList.add("task-options"),l.appendChild(u);let p=document.createElement("div");p.classList.add("task-date"),u.appendChild(p);let m=document.createElement("input");m.type="date",m.id="task-date",m.value=e.dueDateString,m.required=!0,p.appendChild(m);let g=document.createElement("div");g.classList.add("task-group-dropdown-wrapper"),u.appendChild(g);let h=document.createElement("button");h.type="button",h.textContent=e.groupName,a.forEach((t=>{t.name===e.groupName&&(h.style.backgroundColor=t.color)})),g.appendChild(h);let y=document.createElement("div");y.classList.add("task-group-dropdown"),g.appendChild(y),function(){let e=document.querySelector(".task-group-dropdown"),n=a.slice();n.push(new t("Inbox","#00B4D8")),n.forEach((t=>{let n=document.createElement("button");n.type="button",n.textContent=t.name,n.style.backgroundColor=t.color,e.appendChild(n)}))}();let v=document.createElement("div");v.classList.add("edit-task-modal-buttons"),d.appendChild(v);let f=document.createElement("button");f.classList.add("cancel-button"),f.type="button",f.textContent="Cancel",v.appendChild(f);let C=document.createElement("button");C.classList.add("confirm-button"),C.type="submit",C.textContent="Confirm",v.appendChild(C)}!function(){let e=document.querySelector("body"),n=document.createElement("nav");e.appendChild(n);let o=document.createElement("h1");o.textContent="To Do",n.appendChild(o);let d=document.createElement("div");d.classList.add("groups-wrapper"),n.appendChild(d);let l=document.createElement("div");l.classList.add("groups-heading"),d.appendChild(l);let r=document.createElement("p");r.textContent="Groups",l.appendChild(r);let c=document.createElement("div");c.classList.add("groups-heading-buttons"),l.appendChild(c);let s=document.createElement("img");s.src="assets/down-arrow.svg",s.alt="down arrow",s.id="down-arrow-button",c.appendChild(s);let i=document.createElement("img");i.src="assets/plus.svg",i.alt="plus",i.id="plus-button",c.appendChild(i);let u=document.createElement("div");u.classList.add("groups"),d.appendChild(u);let p=document.createElement("div");p.classList.add("group-item"),p.id="inbox",u.appendChild(p);let g=document.createElement("p");g.textContent="Inbox",p.appendChild(g),a.push(new t("School","#FF0000")),a.push(new t("Grocery","#00FF00")),a.push(new t("Hospital","#0000FF")),a.push(new t("Games","#FFFF00")),a.forEach((e=>{m(e)}))}(),document.querySelector("#inbox").classList.add("active"),g(d),function(){let e=document.querySelector(".groups-wrapper"),t="";e.addEventListener("click",(e=>{if("down-arrow-button"===e.target.id&&l(),"plus-button"===e.target.id&&r(),"IMG"===e.target.tagName&&e.target.closest(".group-item")){let t=document.querySelector(".groups"),n=Array.from(t.children).slice(1).indexOf(e.target.parentElement);e.target.parentElement.children[0].value===d&&(document.querySelector("#inbox").classList.add("active"),d="Inbox"),c(n),s(),g(d)}e.target.classList.contains("group-item")&&(Array.from(e.target.parentElement.children).forEach((e=>{e.classList.remove("active")})),e.target.classList.add("active"),d=null==e.target.children[0].value?"Inbox":e.target.children[0].value,s(),g(d))})),e.addEventListener("change",(e=>{if(e.target.classList.contains("color-tag")){let t=e.target.parentElement,n=document.querySelector(".groups"),o=Array.from(n.children).indexOf(t)-1;a[o].color=e.target.value,s(),g(d)}}),!0),e.addEventListener("focus",(e=>{e.target.classList.contains("custom-group-name")&&(t=e.target.value)}),!0),e.addEventListener("blur",(e=>{if(e.target.classList.contains("custom-group-name")){let n=e.target.value;if(n===t)return;if(""===n)return void(e.target.value=t);for(let o=0;o<a.length;o++)if(a[o].name===n)return void(e.target.value=t);let l=e.target.parentElement,r=document.querySelector(".groups"),c=Array.from(r.children).indexOf(l)-1;a[c].name=n,o.forEach((e=>{e.groupName===t&&(e.groupName=n)})),s();let i=document.querySelector(".group-item.active");d=null==i.children[0].value?"Inbox":i.children[0].value,g(d)}}),!0);let n=document.documentElement;n.addEventListener("click",(e=>{if(!e.target.closest("nav")){if("checkbox"===e.target.type&&i(e),"checkbox"!==e.target.type&&e.target.closest(".task")){let t=e.target.closest(".task").dataset.id-1;h(o[t]),document.querySelector(".edit-task-modal").style.display="flex",u()}if(e.target.classList.contains("cancel-button"))p(),e.target.closest(".edit-task-modal").remove();else if(null==e.target.closest(".task-group-dropdown")&&null!=e.target.closest(".edit-task-modal")&&"flex"===document.querySelector(".task-group-dropdown").style.display)console.log("close"),document.querySelector(".task-group-dropdown").style.display="none";else if(e.target==document.querySelector(".task-group-dropdown-wrapper > button"))console.log("Open"),document.querySelector(".task-group-dropdown").style.display="flex";else if(e.target.closest(".task-group-dropdown")&&"BUTTON"===e.target.tagName){let t=document.querySelector(".task-group-dropdown-wrapper");t.children[0].textContent=e.target.textContent,t.children[0].style.backgroundColor=e.target.style.backgroundColor,document.querySelector(".task-group-dropdown").style.display="none"}}})),n.addEventListener("submit",(e=>{if(e.preventDefault(),e.target.lastChild.lastChild.classList.contains("confirm-button")){let e=document.querySelector(".edit-task-modal"),t=e.dataset.id-1;o[t].name=document.querySelector(".edit-task-modal #task-name").value,o[t].description=document.querySelector(".edit-task-modal #task-description").value,o[t].groupName=document.querySelector(".task-group-dropdown-wrapper > button").textContent,o[t].dueDateString=document.querySelector(".edit-task-modal #task-date").value,s(),g(d),e.remove(),p()}}))}()})();
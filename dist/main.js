(()=>{"use strict";var e={d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{p1:()=>r,my:()=>d,QW:()=>p,TF:()=>a,BN:()=>c,z4:()=>s,F6:()=>i,pG:()=>o,f:()=>l});class t{constructor(e,t){this.name=e,this.color=t}}class n{constructor(e,t,n,a,o="Inbox"){this.id=e,this.name=t,this.description=n,this.dueDateString=a,this.groupName=o}}let a=[],o=[new n(1,"Call Mum","Make a call to Mum telling her about stuff.","2022-11-03","School"),new n(2,"Buy protein powder","Buy the 500g Nestle protein powder that's on a discount.","2022-11-04","Grocery"),new n(3,"Drink a glass of water","Hydration is important!","2022-11-27"),new n(4,"Play video games","Time for some fun!","2022-11-04")],r="Inbox";function l(){let e=document.querySelector("#down-arrow-button"),t=document.querySelector(".groups");e.classList.contains("collapsed")?(e.classList.remove("collapsed"),t.classList.remove("collapsed")):(e.classList.add("collapsed"),t.classList.add("collapsed"))}function d(){let e=document.querySelector("#down-arrow-button"),n=document.querySelector(".groups"),o=new t("Untitled","#000000");a.push(o),u(o),e.classList.remove("collapsed"),n.classList.remove("collapsed"),n.lastChild.firstChild.focus()}function c(e){o.forEach((t=>{t.groupName===a[e].name&&(t.groupName="Inbox")}));let t=document.querySelector(".groups");t.removeChild(t.children[e+1]),a.splice(e,1)}function s(){let e=document.querySelector("main");null!=e&&e.remove()}function i(e){let t=e.target.parentElement.dataset.id;o.forEach((e=>{if(String(e.id)===String(t)){let t=o.indexOf(e);o.splice(t,1)}})),e.target.parentElement.remove()}function u(e){let t=document.querySelector(".groups"),n=document.createElement("div");n.classList.add("group-item"),n.classList.add("custom"),t.appendChild(n);let a=document.createElement("input");a.classList.add("custom-group-name"),a.type="text",a.value=e.name,a.maxLength="8",a.spellcheck=!1,a.autocomplete="off",n.appendChild(a);let o=document.createElement("input");o.type="color",o.classList.add("color-tag"),o.value=e.color,n.appendChild(o);let r=document.createElement("img");r.src="assets/trash.svg",r.alt="trash icon",n.appendChild(r)}function p(e){let t=document.querySelector("body"),n=document.createElement("main");t.appendChild(n);let r=document.createElement("h2");r.id="current-group-name",r.textContent=e,n.appendChild(r);let l=document.createElement("div");l.classList.add("task-section"),n.appendChild(l),function(e){let t=document.querySelector(".task-section"),n=new Map;o.forEach((t=>{if("Inbox"!==e&&t.groupName!==e)return;let a=t.dueDateString;new Date(a).getDate()<new Date(Date.now()).getDate()&&(a="Overdue"),n.has(a)?n.get(a).push(t):n.set(a,[t])})),console.log("Dates Map:",n);let r=0;n.forEach(((e,n)=>{let o="Overdue";if("Overdue"!==n){let e=new Date(n);o=e.toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"}),new Date(Date.now()).getDate()===e.getDate()&&(o="Today - "+o)}let l=document.createElement("div");l.classList.add("task-content"),t.appendChild(l);let d=document.createElement("h3");d.classList.add("date-header"),d.textContent=o,l.appendChild(d),function(e,t){let n=document.querySelectorAll(".task-content")[e],o=document.createElement("div");o.classList.add("tasks"),n.appendChild(o),t.forEach((e=>{let t=document.createElement("div");t.classList.add("task"),t.dataset.id=e.id,o.appendChild(t);let n=document.createElement("input");n.type="checkbox",t.appendChild(n);let r=document.createElement("p");if(r.textContent=e.name,t.appendChild(r),"Inbox"!==e.groupName){let n=document.createElement("div");n.classList.add("group-tag"),a.forEach((t=>{t.name!==e.groupName||(n.style.backgroundColor=t.color)})),t.appendChild(n);let o=document.createElement("p");o.textContent=e.groupName,n.appendChild(o)}}))}(r,e),r++;let c=document.createElement("button");c.textContent="Add a new task",l.appendChild(c)}))}(e)}!function(){let e=document.querySelector("body"),n=document.createElement("nav");e.appendChild(n);let o=document.createElement("h1");o.textContent="To Do",n.appendChild(o);let r=document.createElement("div");r.classList.add("groups-wrapper"),n.appendChild(r);let l=document.createElement("div");l.classList.add("groups-heading"),r.appendChild(l);let d=document.createElement("p");d.textContent="Groups",l.appendChild(d);let c=document.createElement("div");c.classList.add("groups-heading-buttons"),l.appendChild(c);let s=document.createElement("img");s.src="assets/down-arrow.svg",s.alt="down arrow",s.id="down-arrow-button",c.appendChild(s);let i=document.createElement("img");i.src="assets/plus.svg",i.alt="plus",i.id="plus-button",c.appendChild(i);let p=document.createElement("div");p.classList.add("groups"),r.appendChild(p);let m=document.createElement("div");m.classList.add("group-item"),m.id="inbox",p.appendChild(m);let g=document.createElement("p");g.textContent="Inbox",m.appendChild(g),a.push(new t("School","#FF0000")),a.push(new t("Grocery","#00FF00")),a.push(new t("Hospital","#0000FF")),a.push(new t("Games","#FFFF00")),a.forEach((e=>{u(e)}))}(),document.querySelector("#inbox").classList.add("active"),p(r),function(){let e=document.querySelector(".groups-wrapper"),t="";e.addEventListener("click",(e=>{if("down-arrow-button"===e.target.id&&l(),"plus-button"===e.target.id&&d(),"IMG"===e.target.tagName&&e.target.closest(".group-item")){let t=document.querySelector(".groups"),n=Array.from(t.children).slice(1).indexOf(e.target.parentElement);e.target.parentElement.children[0].value===r&&(document.querySelector("#inbox").classList.add("active"),r="Inbox"),c(n),s(),p(r)}e.target.classList.contains("group-item")&&(Array.from(e.target.parentElement.children).forEach((e=>{e.classList.remove("active")})),e.target.classList.add("active"),r=null==e.target.children[0].value?"Inbox":e.target.children[0].value,s(),p(r))})),e.addEventListener("change",(e=>{if(e.target.classList.contains("color-tag")){let t=e.target.parentElement,n=document.querySelector(".groups"),o=Array.from(n.children).indexOf(t)-1;a[o].color=e.target.value,s(),p(r)}}),!0),e.addEventListener("focus",(e=>{e.target.classList.contains("custom-group-name")&&(t=e.target.value)}),!0),e.addEventListener("blur",(e=>{if(e.target.classList.contains("custom-group-name")){let n=e.target.value;if(n===t)return;if(""===n)return void(e.target.value=t);for(let o=0;o<a.length;o++)if(a[o].name===n)return void(e.target.value=t);let l=e.target.parentElement,d=document.querySelector(".groups"),c=Array.from(d.children).indexOf(l)-1;a[c].name=n,o.forEach((e=>{e.groupName===t&&(e.groupName=n)})),s();let i=document.querySelector(".group-item.active");r=null==i.children[0].value?"Inbox":i.children[0].value,p(r)}}),!0),document.querySelector(".task-section").addEventListener("click",(e=>{console.log(e.target),"checkbox"===e.target.type&&i(e)}))}()})();